# Cerberus Council Configuration
# Multi-agent AI code review system
version: 1

council:
  name: "Cerberus Council"
  required_check: "Council Verdict"
  mode: parallel                      # parallel | sequential
  cancel_in_progress: true            # Cancel stale runs on new push

model:
  default: "openrouter/moonshotai/kimi-k2.5"
  fallback:
    - "openrouter/google/gemini-3-flash-preview"
    - "openrouter/z-ai/glm-5"
  # Pool for random model assignment per run (issue #148).
  # When a reviewer has "model: pool", a random model is selected each run.
  # Benefits: resilience (no single model failure tanks a reviewer),
  # implicit eval data, cost optimization, diversity of perspectives.
  # pool:
  #   - "openrouter/moonshotai/kimi-k2.5"
  #   - "openrouter/z-ai/glm-5"
  #   - "openrouter/minimax/minimax-m2.5"
  #   - "openrouter/google/gemini-3-flash-preview"
  cli: opencode
  thinking: true
  max_steps: 25                       # Max agentic steps per reviewer
  timeout: 600                        # Seconds per reviewer

override:
  enabled: true
  command: "/council override"
  actor: pr_author                    # pr_author | write_access | maintainers_only
  require_reason: true
  pin_to_sha: true

# Verdict rules
verdict:
  fail_on: "any_critical_or_2_major"  # any_critical | any_critical_or_2_major | any_major
  warn_on: "any_major_or_5_minor_or_3_minor_same_category"  # any_major | any_major_or_5_minor_or_3_minor_same_category
  confidence_min: 0.7

council_verdict:
  fail_on: "any_critical_fail_or_2_fails"  # single non-critical FAIL is downgraded to WARN

# The six heads of Cerberus.
# Names are cosmetic — perspective determines behavior.
reviewers:
  - name: APOLLO
    perspective: correctness
    model: "openrouter/moonshotai/kimi-k2.5"  # optional, falls back to model.default
    description: "Correctness & Logic — Find the bug"
    override: pr_author
    tools:
      shell: false

  - name: ATHENA
    perspective: architecture
    model: "openrouter/z-ai/glm-5"  # optional, falls back to model.default
    description: "Architecture & Design — Zoom out"
    override: pr_author
    tools:
      shell: false

  - name: SENTINEL
    perspective: security
    model: "openrouter/minimax/minimax-m2.5"  # rotated from deepseek-v3.2 (reasoning trace issues)
    description: "Security & Threat Model — Think like an attacker"
    override: maintainers_only
    tools:
      shell: false

  - name: VULCAN
    perspective: performance
    model: "openrouter/google/gemini-3-flash-preview"  # optional, falls back to model.default
    description: "Performance & Scalability — Think at runtime"
    override: pr_author
    tools:
      shell: false

  - name: ARTEMIS
    perspective: maintainability
    model: "openrouter/qwen/qwen3-max-thinking"  # upgraded: flagship Qwen reasoning model
    description: "Maintainability & DX — Think like the next developer"
    override: pr_author
    tools:
      shell: false

  - name: CASSANDRA
    perspective: testing
    model: "openrouter/qwen/qwen3-max-thinking"  # rotated from qwen3-coder-next (empty output 4x)
    description: "Testing & Coverage — See what will break"
    override: pr_author
    tools:
      shell: false
